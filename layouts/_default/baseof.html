<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>{{ block "title" . }} {{ .Site.Title }} {{ end }}</title>

    {{/* Include the tailwind CSS file */}}
    {{ $cssDir := "css" }}
    {{ $tailwindFile := path.Join "/" $cssDir "tailwind-style.css"}}
    <link rel="stylesheet" href="{{ $tailwindFile }}">

    {{/* Then (afterwards, so they get precedence) include all the other CSS files in "static/css" */}} 
    {{ $cssDirFullPath := path.Join "static" $cssDir }}
    {{ range $file := readDir $cssDirFullPath }}
      {{ if ne $file.Name "tailwind-style.css" }}
        {{ $cssFile := path.Join "/" $cssDir $file.Name }}
        <link rel="stylesheet" href="{{ $cssFile }}">
      {{ end }}
    {{ end }}

    {{ partial "includes.html" . }}
  </head>
  <body>
    {{ partial "navbar/main.html" page }}
    <div class="flex flex-row mt-8 mx-4 drawer w-fit">
      <input id="sidebar-drawer" type="checkbox" class="drawer-toggle" />
      <div class="drawer-content">
        {{/* Left sidebar */}}
        <div class="flex-auto">
          {{ block "left-sidebar" . }}
          {{ end }}
        </div>
        <div class="flex-grow-0 flex-shrink-1 md:max-w-3xl overflow-hidden prose">
          {{ partial "pageContent/main.html" . }}
        </div>
        {{/* Right sidebar */}}
        <div class="flex-auto">
          {{ block "right-sidebar" . }}
          {{ end }}
        </div>
      </div>
      <div class="drawer-side">
        <label for="sidebar-drawer" aria-label="close sidebar" class="drawer-overlay"></label>
          <ul tabindex="0" class="menu bg-base-200 text-base-content min-h-full w-64 p-4">
          {{ range $navItem := $.Site.Params.navbar.links }}
              <li><a href="{{ $navItem.link }}">{{ $navItem.name }}</a></li>
          {{ end }}
          </ul>
      </div>
    </div>
    {{ partial "footer.html" . }}
  </body>
</html>
